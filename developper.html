<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Joomla-pdf-document-view by studio42</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/studio42/joomla-pdf-document-view">View on GitHub</a></li>
          <li class="downloads"><a href="https://github.com/studio42/joomla-pdf-document-view/archive/lib_WkHtmlToPdf_j2.5.zip">WkHtmlToPdf</a></li>
          <li class="downloads"><a href="https://github.com/studio42/joomla-pdf-document-view/archive/lib_tcpdf_j2.5.zip">TCPDF</a></li>
          <li class="downloads"><a href="https://github.com/studio42/joomla-pdf-document-view/archive/lib_mpdf_j2.5.zip">mPDF</a></li>
          <li class="downloads"><a href="https://github.com/studio42/joomla-pdf-document-view/tree/lib_dompdf_j2.5.zip">domPDF</a></li>
          <li class="title"> LIBRARIES</li>
          <li class="downloads"><a href="https://github.com/studio42/joomla-pdf-document-view/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/studio42/joomla-pdf-document-view/tarball/master">TAR</a></li>
          <li class="title"> DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Joomla-pdf-document-view</h1>
          <p>Joomla 2.5 universal pdf render(dompdf, mpdf, tcpdf, wkhtmltopdf)</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/studio42">studio42</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <p><a href="https://github.com/studio42/joomla-pdf-document-view/archive/master.zip">DOWNLOAD IT</a> <A HREF="index.html">Return to home Page</A> </p>

<h2>Display your PDF</h2>
<p>You can display directly your pdf an adding <i>&amp;format=pdf</i> to the link.(or <i>?format=pdf</i> in case of
a full sef URL), no need to create a specific view, with the quality of some render you get a nice PDF without changing your original page</P>

<H2>Save PDF document to file</H2>
<P>To save your pdf in your remote server, you have to change only
one line in your component.</P>
<pre><code>$document->setDestination('F')&nbsp;;</code></pre>
<P>if you have to change the directory or name, provide a full path
link</P>
<pre><code>`$document->setPath( JPATH_ROOT.'/media/mydocument.pdf/')&nbsp;;</code></pre>
<P>but you can  write outside the JPATHROOT using a full valid path</P>
<pre><code>$document->setPath('D:\pdfs\mydocument.pdf')</code></pre>
<P>is valid in window</P>
<pre><code>$document->setPath('/home/myfolder/mydocument.pdf'</code></pre>
<P>is valid in linux if you have the right to write on this folders of course.</P>
<H2>Add PDF link button in a template</H2>
<P>
One of easiest way , is of course hard coding the link in the view.<br/>
but a nicer way is provided by the Joomla 2.5 CMS :</P>
<h4>extending JHtml</h4>
<p>Here a little code, to add in your template.<br />
File : /templates/MYTEMPLATE/helpers/pdf.php</p>

<pre><code>class JHtmlPdf
{
  static function article($article, $params, $attribs = array())
	{
		$url  = ContentHelperRoute::getArticleRoute($article->slug, $article->catid);
		$url .= '&tmpl=component&print=1&format=pdf&layout=default&page='.@ $request->limitstart;

		$status = 'status=no,toolbar=no,scrollbars=yes,titlebar=no,menubar=no,resizable=yes,width=640,height=480,directories=no,location=no';

		// checks template image directory for image, if non found default are loaded
		if ($params->get('show_icons')) {
			$text = JHtml::_('image', 'system/pdf_button.png', JText::_('JGLOBAL_PRINT'), NULL, true);
		} else {
			$text = JText::_('JGLOBAL_ICON_SEP') .'&#160;'. JText::_('JGLOBAL_PRINT') .'&#160;'. JText::_('JGLOBAL_ICON_SEP');
		}

		$attribs['title']	= JText::_('JGLOBAL_PRINT');
		$attribs['onclick'] = "window.open(this.href,'win2','".$status."'); return false;";
		$attribs['rel']		= 'nofollow';

		return JHtml::_('link', JRoute::_($url), $text, $attribs);
	}
}
</code></pre>
and how to add it in your view
<pre><code>

 // icones overide or why not only PDF icon in your case
 /* CODE TO ADD */
 JHTML::addIncludePath(JPATH_SITE . '/templates/MYTEMPLATE/helpers');
 /* LINE TO ADD END */
 // This code is original icons (but can be add in your own helper)
 JHtml::addIncludePath(JPATH_COMPONENT . '/helpers');
</code></pre>
search
<pre><code>
 echo JHtml::_('icon.print_popup',  $this->item, $params);
</code></pre>
and replace with
<pre><code>
 echo JHtml::_('pdf.article',  $this->item, $params);
</code></pre>
<p>A little explain,<br />
 JHTML <strong>pdf.article</strong> say to call class JHtmlPdf and the function article. and because we added the path to the helepr folder. Joomla know where the class is.</p>
<p>Of course whe have to add the class in the /templates/MYTEMPLATE/helpers and the file must be named pdf.php in case of using JHtml::_('pdf.XXX . It's the naming convention of joomla JHTML</p>
<p> Another advantage is in case of the image 'system/pdf_button.png' exist in the media/system folder but not in MYTEMPLATE/images/system, then joomla us this from joomla system folder </p>

    </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</HTML>
